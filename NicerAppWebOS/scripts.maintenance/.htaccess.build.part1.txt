# do not touch without a clue about apache2 rewriterules.
# read the manual; https://httpd.apache.org/docs/current/mod/mod_rewrite.html
ServerSignature Off
Options +FollowSymLinks

<IfModule mod_rewrite.c>
    # initialization of the apache2 rewrite engine;
    RewriteEngine on
    RewriteBase /
    # redirect www.nicer.app to nicer.app
    RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
    RewriteRule ^(.*)$ https://%1/$1 [R=307,L]

    # /*--Heart of the blogging features--*/
    RewriteCond %{REQUEST_METHOD} ^(GET)$
    RewriteCond %{HTTP:X-Requested-With} XMLHttpRequest
    RewriteRule ^(.*)/in/(.*)$ NicerAppWebOS/logic.AJAX/ajax_get_content.php?username=$1&url1=in&dataID=$2 [L]

    RewriteCond %{REQUEST_METHOD} ^(GET)$
    RewriteRule ^(.*)/in/(.*)$ NicerAppWebOS/index.php?username=$1&url1=in&dataID=$2 [L]


    RewriteCond %{REQUEST_METHOD} ^(GET)$
    RewriteCond %{HTTP:X-Requested-With} XMLHttpRequest
    RewriteRule ^(.*)/on/(.*)$ NicerAppWebOS/logic.AJAX/ajax_get_content.php?username=$1&url1=on&dataID=$2 [L]

    RewriteCond %{REQUEST_METHOD} ^(GET)$
    RewriteRule ^(.*)/on/(.*)$ NicerAppWebOS/index.php?username=$1&url1=on&dataID=$2 [L]


    RewriteCond %{REQUEST_METHOD} ^(GET)$
    RewriteCond %{HTTP:X-Requested-With} XMLHttpRequest
    RewriteRule ^(.*)/during/(.*)$ NicerAppWebOS/logic.AJAX/ajax_get_content.php?username=$1&url1=during&dataID=$2 [L]

    RewriteCond %{REQUEST_METHOD} ^(GET)$
    RewriteRule ^(.*)/during/(.*)$ NicerAppWebOS/index.php?username=$1&url1=during&dataID=$2 [L]


    # /*--Front page--*/
    # front page's data when requested with (javascript) $.ajax aka na.loadContent()
            # tried this already (doesn't work)
            ##RewriteCond %{REQUEST_FILENAME} !-f
            ##RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_METHOD} ^(GET)$
    RewriteCond %{HTTP:X-Requested-With} XMLHttpRequest
    RewriteRule ^$ NicerAppWebOS/logic.AJAX/ajax_get_content.php?viewID=/ [L]

    # front page when it needs the full NicerApp framework
            # tried this already (doesn't work)
            ##RewriteCond %{REQUEST_FILENAME} !-f
            ##RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_METHOD} ^(GET)$
    RewriteRule ^$ NicerAppWebOS/index.php?viewID=/ [L]

    RewriteCond %{REQUEST_METHOD} ^(GET)$
    RewriteRule ^nc$ NicerAppWebOS/index.php?uvt=n&lc=n&viewID=/ [L]

    # /*--all other pages--*/

    # all other pages' data that got requested with (javascript) $.ajax aka na.loadContent()
            # tried this already (doesn't work)
            ##RewriteCond %{REQUEST_FILENAME} !-f
            ##RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} !^/NicerAppWebOS/apps/NicerAppWCS/applications/2D/musicPlayer/music/.*$
    RewriteCond %{HTTP:X-Requested-With} XMLHttpRequest
    RewriteRule ^view-content/(.*)$ NicerAppWebOS/logic.AJAX/ajax_get_content.php?seoValue=$1&%{QUERY_STRING} [L]

    # all pages that got requested via a bookmark or as links elsewhere on the web
    # (requiring the full NicerApp WebOS HTML, CSS and JS to be sent along with the content)
            # tried this already (doesn't work)
            ##RewriteCond %{REQUEST_FILENAME} !-f
            ##RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_URI} !^/NicerAppWebOS/apps/NicerAppWCS/applications/2D/musicPlayer/music/.*$
    RewriteRule ^view/(.*)$ NicerAppWebOS/index.php?seoValue=$1&%{QUERY_STRING} [L]


    RewriteCond %{REQUEST_URI} !^/NicerAppWebOS/apps/NicerAppWCS/applications/2D/musicPlayer/music/.*$
    RewriteCond %{HTTP:X-Requested-With} XMLHttpRequest
    RewriteRule ^([\-\w\d]+)$ NicerAppWebOS/logic.AJAX/ajax_get_content.php?seoValue=$1 [L]

    RewriteCond %{REQUEST_URI} !^/NicerAppWebOS/apps/NicerAppWCS/applications/2D/musicPlayer/music/.*$
    RewriteRule ^([\-\w\d]+)$ NicerAppWebOS/index.php?seoValue=$1 [L]
</IfModule>
